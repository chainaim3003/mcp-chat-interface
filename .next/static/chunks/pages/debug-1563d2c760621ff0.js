(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[94],{467:function(e,s,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/debug",function(){return l(9990)}])},9990:function(e,s,l){"use strict";l.r(s),l.d(s,{default:function(){return DebugPage}});var r=l(5893),a=l(7294);function DebugPage(){var e,s;let[l,t]=(0,a.useState)(null),[i,n]=(0,a.useState)(!1),[d,o]=(0,a.useState)(null),[c,m]=(0,a.useState)({serverName:"",toolName:"",args:"{}"}),loadDebugInfo=async()=>{n(!0);try{let e=await fetch("/api/debug/mcp-tools"),s=await e.json();t(s.debugInfo)}catch(e){console.error("Debug load error:",e)}finally{n(!1)}},testTool=async()=>{n(!0);try{let e=await fetch("/api/debug/test-server",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({serverName:c.serverName,toolName:c.toolName,args:JSON.parse(c.args)})}),s=await e.json();o(s)}catch(e){o({error:e.message})}finally{n(!1)}};return(0,a.useEffect)(()=>{loadDebugInfo()},[]),(0,r.jsxs)("div",{className:"p-6 max-w-6xl mx-auto",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"MCP System Debug"}),(0,r.jsx)("button",{onClick:loadDebugInfo,disabled:i,className:"mb-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50",children:i?"Loading...":"Refresh Debug Info"}),l&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-gray-100 p-4 rounded",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"System Status"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"MCP Initialized:"})," ",l.mcpInitialized?"✅":"❌"]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"Total Tools:"})," ",l.toolSummary.totalTools]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"Configured Servers:"})," ",l.totalServersConfigured]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"Running Servers:"})," ",l.runningServers]})]})]}),(0,r.jsxs)("div",{className:"bg-gray-100 p-4 rounded",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"Server Details"}),(0,r.jsx)("div",{className:"space-y-4",children:Object.entries(l.serverDetails).map(e=>{let[s,l]=e;return(0,r.jsxs)("div",{className:"border p-3 rounded",children:[(0,r.jsx)("h3",{className:"font-medium",children:s}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-sm mt-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"Status:"})," ",l.status]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"PID:"})," ",l.pid||"N/A"]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"Tools:"})," ",l.toolCount]})]}),l.tools&&l.tools.length>0&&(0,r.jsxs)("div",{className:"mt-2",children:[(0,r.jsx)("strong",{children:"Available Tools:"}),(0,r.jsx)("ul",{className:"list-disc list-inside ml-4",children:l.tools.map(e=>(0,r.jsx)("li",{children:e},e))})]}),l.error&&(0,r.jsxs)("div",{className:"mt-2 text-red-600",children:[(0,r.jsx)("strong",{children:"Error:"})," ",l.error]})]},s)})})]}),(0,r.jsxs)("div",{className:"bg-gray-100 p-4 rounded",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Test Individual Tool"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Server Name"}),(0,r.jsxs)("select",{value:c.serverName,onChange:e=>m({...c,serverName:e.target.value}),className:"w-full p-2 border rounded",children:[(0,r.jsx)("option",{value:"",children:"Select Server"}),Object.keys(l.serverDetails).map(e=>(0,r.jsx)("option",{value:e,children:e},e))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Tool Name"}),(0,r.jsxs)("select",{value:c.toolName,onChange:e=>m({...c,toolName:e.target.value}),className:"w-full p-2 border rounded",disabled:!c.serverName,children:[(0,r.jsx)("option",{value:"",children:"Select Tool"}),c.serverName&&(null===(s=l.serverDetails[c.serverName])||void 0===s?void 0:null===(e=s.tools)||void 0===e?void 0:e.map(e=>(0,r.jsx)("option",{value:e,children:e},e)))]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Arguments (JSON)"}),(0,r.jsx)("textarea",{value:c.args,onChange:e=>m({...c,args:e.target.value}),className:"w-full p-2 border rounded h-20",placeholder:'{"key": "value"}'})]}),(0,r.jsx)("button",{onClick:testTool,disabled:i||!c.serverName||!c.toolName,className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 disabled:opacity-50",children:"Test Tool"})]}),d&&(0,r.jsxs)("div",{className:"mt-4 p-3 bg-white rounded border",children:[(0,r.jsx)("h3",{className:"font-medium mb-2",children:"Test Result:"}),(0,r.jsx)("pre",{className:"text-sm overflow-auto",children:JSON.stringify(d,null,2)})]})]})]})]})}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=467)}),_N_E=e.O()}]);